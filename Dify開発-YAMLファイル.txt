短く結論 → **「完全な”同時編集（GUIとYAMLを一度に双方向で同期）”を提供する公式UIは現状では見当たりません」**。ただし Dify は **GUI（Studio）でのビジュアル・ワークフロー編集**と **DSL（YAML）ファイルのエクスポート／インポート**、さらに CLI/API を使った一連の運用が使えるため、工夫すれば「GUIで確認しつつ素早くYAMLを編集・デプロイ」する実用的なワークフローは作れます。コミュニティでもGUIから直接YAML編集を望む声が上がっています（公式機能リクエスト）。([GitHub][1])

以下、実用的で現場ですぐ使える **推奨ワークフロー（短ループ）** と **本番向けワークフロー（堅牢）**、および編集時の**具体的なツール／注意点**をまとめます。

---

# 1) 当面すぐ使える ? 「高速ループ」 (おすすめ)

目的：少量の変更を素早く反映し、GUIで動作を確認したい場合。

手順（短いループ）

1. Studio（GUI）でワークフローを作る・微修正。([Dify Docs][2])
2. 必要なら **「DSL（YAML）をエクスポート」** してローカルで編集。（エクスポート機能あり）([Dify][3])
3. ローカルでYAMLを編集（下の「推奨エディタ」参照）。
4. 編集後は **Studio の「DSLファイルをインポート／アップロード」** で再読み込み・上書き。プラットフォームはインポート時にDSLバージョン互換性チェックを行います。([Dify Docs][4])
5. GUI で差分を確認して公開（Publish）/テスト。

ポイント：GUIの細かいノード編集はそのまま使い、YAMLは大量追加やパターン化（複数ノードをコピペで追加）に使うと効率的です。コミュニティでも「GUIからYAMLを直接編集したい」という要望があるため、YAMLでバルク操作→インポートが実用的です。([GitHub][1])

---

# 2) チーム・本番向け ? 「Git + CI/CD」ワークフロー（推奨）

目的：履歴管理・コードレビュー・自動デプロイを効かせたい場合。

基本構成：**Git リポジトリ（DSL/YAML） + VSCode 等のエディタ + CI（GitHub Actions等）→ Dify へ自動インポート/デプロイ（CLI/API）**

例の流れ（具体）

1. Studio で作ったワークフローを **DSL(YAML)** としてエクスポートし、Git 管理下に置く。([Dify][3])
2. 変更は Pull Request（コードレビュー）で行う。PR マージで CI が走る。
3. CI のジョブで `dify import` や Dify の管理 API（または自前のスクリプト/CLI）を叩いて新しいDSLをアップロード／公開する。※CLI を使った自動化や API 経由でのインポートはコミュニティ/自ホスティングで実装例が出ています（完全な公式APIの公開状況は環境によるため要確認）。([Dify Docs][5])

実務ヒント：

* 自ホスト（self-hosted）の Dify を使うと CLI/API 経由での自動化がやりやすいです。SaaS でもエクスポート→手動インポートで運用可能。([華為クラウドサポート][6])
* CI では必ず「スキーマ検証／YAML Lint／ユニット的なテスト」を入れて壊れたDSLを公開しないようにします。

---

# 3) 編集時に便利なツール（推奨）

* エディタ：**VS Code**（Split view で YAML と GUI （ブラウザ）を並べて編集）
* VS Code 拡張（おすすめ）: `YAML`（スキーマ対応）, `Prettier`（整形）, `GitLens`（差分/履歴）
* YAML ツール：`yamllint`、`yq`（コマンドラインでの加工）
* バリデーション：Dify の DSL バージョンチェック（インポート時に警告が出る）を活用。([Dify Docs][4])

（補足）CLI のサンプルコマンド例（コミュニティ実例）:

```bash
# エクスポート（例）
dify export <APP_ID> false

# インポート（例）
dify import ./dsl/sample.yml

# 公開（例）
dify publish <WORKFLOW_APP_ID> "nightly" "auto publish"
```

これらは CLI 実装例や利用レシピがコミュニティで共有されています（運用環境でコマンドは変わるので README/公式ドキュメントを要確認）。([Zenn][7])

---

# 4) 実務での「小さな運用ルール」（やると楽）

1. GUIで動作確認できる最低限の「テストデータ」を用意しておく。
2. YAML を直接編集したらまず **ステージ環境** にインポートして動作確認 → 問題なければ本番に公開。
3. 大きな変更は GUI と YAML のどちらか一方を「公式ソース（single source of truth）」に決め、変更ルールをチームで統一する（例：日常はGUI、構造変更や大量追加はYAML）。
4. 変更履歴は必ず Git に残す（誰がいつどのノードを変えたか追跡できる）。([Zenn][8])

---

# 5) もし「真の双方向リアルタイム同時編集（WYSIWYG?YAML）」が必須なら

現状は公式にそれを保証する UI は無いので、選択肢は以下：

* **自作プラグイン／ツール** を作る（Dify の self-host + API/CLI を使い、ブラウザ拡張やエディタ拡張で双方向同期を実装）
* あるいは「コミュニティ機能要望」をウォッチして、将来の公式対応を待つ（GitHub Discussions/Issues をフォロー）。([GitHub][1])

---

## まとめ（短く）

* 「完全なリアルタイム同時編集」を公式UIで実現する機能は見つかりませんでしたが、**エクスポート/インポート + CLI/API + Git を組み合わせれば実用的で高速な運用が可能**です。([Dify Docs][4])
* まずは「短ループ（GUI → エクスポート → YAML編集 → インポート）」を試し、慣れてきたら Git + CI 自動デプロイを導入するのが現実的で効果が高い運用です。([Dify][3])

もし良ければ、あなたの使い方（個人の実験用かチーム／本番か、セルフホストかSaaSか）を教えてください。環境に合わせた**具体的な CI スクリプト（GitHub Actions の雛形）**や **VS Code 設定ファイル** をその場で作って差し上げます ? どれを優先するか指示ください。

[1]: https://github.com/langgenius/dify/discussions/3330?utm_source=chatgpt.com "Ability to Edit Workflow YAML from GUI ? langgenius dify"
[2]: https://docs.dify.ai/en/use-dify/getting-started/quick-start?utm_source=chatgpt.com "30-Minute Quick Start - Dify Docs"
[3]: https://dify.ai/blog/dify-deepseek-deploy-a-private-ai-assistant?utm_source=chatgpt.com "Deploy a Private AI Assistant & Build a Local DeepSeek R1 ..."
[4]: https://docs.dify.ai/ja/use-dify/workspace/app-management?utm_source=chatgpt.com "アプリの管理 - Dify Docs"
[5]: https://docs.dify.ai/plugin-dev-en/0111-cli?utm_source=chatgpt.com "CLI"
[6]: https://support.huaweicloud.com/intl/en-us/dify-aislt/dify_06.html?utm_source=chatgpt.com "Getting Started_Implementation Procedure_Building a Dify ..."
[7]: https://zenn.dev/furunag/articles/dify-cli-onefile-bash?utm_source=chatgpt.com "Self-Host Dify Console APIのワンファイル Dify CLIを作って ..."
[8]: https://zenn.dev/drsprime/articles/36ea6e5f9520cd?utm_source=chatgpt.com "Dify開発のTips集: DSLのバージョン管理/デプロイフロー/ ..."

## ① GitHub Actions（個人実験用・最小構成）

### 前提

* Dify の Workflow を **DSL(YAML)** で Git 管理
* main ブランチに push されたら **自動で Dify にインポート**
* Dify は **Self-host** または **API/CLI が使える環境** を想定

---

### `.github/workflows/dify-import.yml`

```yaml
name: Dify DSL Import (Personal)

on:
  push:
    branches: [ main ]
    paths:
      - "dsl/**/*.yml"
      - "dsl/**/*.yaml"

jobs:
  import-dify:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js (for dify-cli)
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Install dify-cli
        run: |
          npm install -g @dify-ai/dify-cli

      - name: Import DSL to Dify
        env:
          DIFY_API_BASE: ${{ secrets.DIFY_API_BASE }}
          DIFY_API_KEY:  ${{ secrets.DIFY_API_KEY }}
        run: |
          for file in dsl/*.yml; do
            echo "Importing $file"
            dify import "$file" \
              --endpoint "$DIFY_API_BASE" \
              --api-key "$DIFY_API_KEY"
          done
```

---

### GitHub Secrets に設定する値

| Key             | 内容                                                     |
| --------------- | ------------------------------------------------------ |
| `DIFY_API_BASE` | [https://xxxx/v1](https://xxxx/v1) など Dify API エンドポイント |
| `DIFY_API_KEY`  | 個人用 API Key                                            |

---

## ② YAML を壊さないための VS Code 設定

### `.vscode/settings.json`

```json
{
  "editor.formatOnSave": true,
  "editor.tabSize": 2,
  "editor.insertSpaces": true,

  "files.trimTrailingWhitespace": true,

  "yaml.format.enable": true,
  "yaml.validate": true,

  "yaml.schemas": {
    "https://raw.githubusercontent.com/dify-ai/dify/main/schema/workflow.json": "dsl/*.yml"
  }
}
```

---

### 推奨 VS Code 拡張

* **YAML**（redhat.vscode-yaml）
* **Prettier**
* **GitLens**

---

## ③ 個人実験でのおすすめディレクトリ構成

```text
repo-root/
 ├ dsl/
 │  └ workflow-sample.yml
 ├ .github/
 │  └ workflows/
 │     └ dify-import.yml
 └ .vscode/
    └ settings.json
```

---

## ④ 個人利用向け運用ルール（重要）

* **GUI = 動作確認用 / YAML = 正** と決める
* GUIで変更したら必ず Export → Git に反映
* main に入ったら自動で Dify に反映（失敗したら即修正）
* 1 Workflow = 1 YAML（分割しない）

---

## ⑤ よくある事故防止メモ

* インデント崩れ → formatOnSave 必須
* GUIに戻らない → YAML 側で node_id を削除しない
* 急に壊れた → Dify 側 DSL バージョンアップを疑う

---

---

## ⑥ GUIに戻らないYAML設計術（実践版）

### 基本思想

**GUIは確認専用／YAMLを正とする** ことで、
「GUIで開いたら壊れた」「戻れない」を防ぐ。

---

### 1. node_id を絶対に消さない・変えない

Dify は `node_id` を内部参照に使うため、変更すると GUI で紐付けが壊れる。

? NG

```yaml
- id: llm_1
```

?

```yaml
- id: llm_main
```

? OK

```yaml
- id: llm_1
  name: Main LLM
```

**名前や description で意味付けする**

---

### 2. version / app_id は固定

```yaml
version: 0.1.0
app:
  id: workflow_xxxx
```

* 削除・変更すると Import 時に別物扱いされる
* GUI で「新規扱い」になる原因 No.1

---

### 3. ノード順序は論理順に固定

GUI は位置を持つが、YAML は**順序＝可読性**。

おすすめ順：

1. start
2. input / variable
3. iteration / loop
4. llm
5. tool
6. output

---

### 4. position(x,y) は触らない

```yaml
position:
  x: 320
  y: 180
```

* 手編集すると GUI 表示が崩れる
* 位置調整は **GUIのみ** で行う

---

### 5. Iteration / Loop は "1ブロック1責務"

? 1つのループで何でもやる

?

* iteration_collect
* iteration_llm
* iteration_merge

→ GUI で追える / YAML で差分管理しやすい

---

### 6. input / output は最上位に寄せる

```yaml
inputs:
  user_query:
    type: string
outputs:
  result:
    type: string
```

* GUI で I/O が即理解できる
* Loop 内に output を書かない

---

### 7. GUI確認用コメントを埋め込む

```yaml
# GUI確認ポイント:
# - iteration_llm が3回回る
# - tool_search は2回目のみ
```

YAMLコメントは Import 時に無視されるため安全

---

### 8. 変更フローの黄金ルール（事故防止）

1. YAML編集
2. Git commit
3. CI Import
4. GUIで開く（触らない）
5. 問題あれば YAML に戻る

---

### 9. よくある「GUIに戻れない」原因まとめ

| 原因           　| 症状           |
| ------------　 　| -------- 　    |
| node_id 変更   　| ノード未表示   |
| position 手編集  | レイアウト崩壊 |
| version 不整合   | Import失敗     |
| Loop内 output    | GUIエラー      |

---

### 10. 最終チェックリスト（30秒）

* [ ] node_id 触っていない
* [ ] position 触っていない
* [ ] inputs / outputs は最上位
* [ ] iteration は分割済み
* [ ] GUIは確認のみ

---

この設計を守れば **GUI → YAML → GUI を安全に往復** できます。

次にできること：

* Iteration / Loop 専用 DSL テンプレ
* GUI→YAML 5分チェックリスト
* 壊れたWorkflow復旧手順


追加しました。
キャンバス内に **「⑥ GUIに戻らないYAML設計術（実践版）」** を反映しています。

これは **個人実験で一番ハマりやすい事故（GUIが壊れる／戻れない）を確実に防ぐための“実務ルール集”** です。
特に重要なのは次の3点です。

---

### 最重要ポイント（ここだけ守れば8割防げます）

1. **`node_id` は絶対に変更しない**
2. **`position(x,y)` はGUI専用（YAMLで触らない）**
3. **GUIは「確認のみ」、編集はYAML一本化**

---

この設計術は

* Iteration / Loop を多用する
* YAMLでゴリゴリ組みたい
* でも最終的にはGUIで可視化したい

という **Dify上級者の使い方** に最適化しています。

---

### 次の一手（おすすめ順）

* **Iteration / Loop 専用 DSL テンプレ**（コピペ即使える）
* **GUI→YAML→GUI を5分で回すチェックリスト**
* **壊れたWorkflowをYAMLから復旧する手順**

どれを出しますか？番号だけでOKです。
